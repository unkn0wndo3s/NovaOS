%ifndef NOVA_FIRMWARE_INC
%define NOVA_FIRMWARE_INC

%define FIRMWARE_KIND_BIOS 0
%define FIRMWARE_KIND_UEFI 1

%define EFI_SIMPLE_TEXT_OUTPUT_OUTPUTSTRING 8

%define NOVA_FIRMWARE_SIGNATURE 0x4E465755 ; 'NFWU'

; Nova firmware context layout (all offsets in bytes)
%define NOVA_FW_CTX_SIGNATURE        0
%define NOVA_FW_CTX_SYSTEM_TABLE     8
%define NOVA_FW_CTX_TEXT_OUTPUT      16
%define NOVA_FW_CTX_BLOCK_IO         24
%define NOVA_FW_CTX_IMAGE_HANDLE     32
%define NOVA_FW_CTX_MEMMAP_PTR       40
%define NOVA_FW_CTX_MEMMAP_SIZE      48
%define NOVA_FW_CTX_MEMDESC_SIZE     56
%define NOVA_FW_CTX_MEMDESC_VERSION  60
%define NOVA_FW_CTX_RSDP_PTR         64
%define NOVA_FW_CTX_RESERVED0        72
%define NOVA_FW_CTX_TOTAL_SIZE       80

; Normalized memory map constants
%define NOVA_MEM_SIGNATURE       0x4E4D4D50 ; 'NMMP'
%define NOVA_MEM_MAX_ENTRIES     128
%define NOVA_MEM_ENTRY_SIZE      24
%define NOVA_MEM_ENTRY_DWORDS    (NOVA_MEM_ENTRY_SIZE / 4)

%define NOVA_MEM_TYPE_USABLE         1
%define NOVA_MEM_TYPE_RESERVED       2
%define NOVA_MEM_TYPE_ACPI_RECLAIM   3
%define NOVA_MEM_TYPE_ACPI_NVS       4
%define NOVA_MEM_TYPE_MMIO           5
%define NOVA_MEM_TYPE_BAD            6
%define NOVA_MEM_TYPE_PERSISTENT     7

%define NOVA_MEM_SOURCE_NONE 0
%define NOVA_MEM_SOURCE_BIOS 1
%define NOVA_MEM_SOURCE_UEFI 2

; ACPI info flags
%define NOVA_ACPI_FLAG_FOUND        0x00000001
%define NOVA_ACPI_FLAG_HAS_XSDT     0x00000002
%define NOVA_ACPI_FLAG_FROM_UEFI    0x00000004
%define NOVA_ACPI_FLAG_HAS_MADT     0x00000008
%define NOVA_ACPI_FLAG_CPU_LIMIT    0x00000010

; CPU topology constants
%define NOVA_CPU_MAX_ENTRIES        256
%define NOVA_CPU_KIND_LAPIC         1
%define NOVA_CPU_KIND_IOAPIC        2

%endif
